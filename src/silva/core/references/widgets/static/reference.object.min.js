var ReferencedRemoteObject=function(e,t){return function(n,r){var i=n.attr("id"),s=n.find("#"+i+"-base").val(),o=n.find("#"+i+"-interface").val(),u=n.find("#"+i+"-show-index").val(),a=n.data("reference-default-message")||"no reference selected.",f=n.find("ul.multiple-references");r&&(i+=r);var l=n.find("#"+i+"-value"),c=n.find("#"+i+"-link"),h=n.find("#"+i+"-edit-link");if(!c.length){var p=e("<li />");c=e('<a id="'+i+'-link" />'),h=e('<a id="'+i+'-edit-link" />'),p.append(c),p.append(h),f.append(p)}var d={identifier:i+"-value",data:function(){return l.data("referenced-remote-content")},reference:function(){return l.val()},title:function(){var e=d.data();return e?e.title:"no reference selected"},url:function(){var e=d.data();return e?e.url:""},clear:function(e){e||(e=a),h.hide(),h.attr("href","#"),c.text(e),c.bind("click",function(){return!1}),c.attr("href","#"),c.removeAttr("title"),l.length&&(l.val("0"),l.trigger("remote-reference-modified",{}))},fetch:function(t){var n={intid:t};c.text("loading ..."),l.length&&l.val(t),o&&(n["interface"]=o),u&&(n.show_container_index="true"),e.getJSON(s+"/++rest++silva.core.references.items",n,d.render)},render:function(n){if(n.url===undefined){d.fetch(n.intid);return}var r=e('<ins class="icon" />'),i=function(e,t){t?c.attr(e,t):c.removeAttr(e)};c.empty(),c.text(n.title),i("href",n.url),i("title",n.path),c.unbind("click"),n.url&&(h.show(),h.attr("href",n.path)),c.data("content",n),t.ui.icon(r,n.icon),r.prependTo(c),l.length&&(l.val(n.intid),l.trigger("reference-modified",n))},change:function(e){l.bind("reference-modified",e)},show:n.show,hide:n.hide,toggle:n.toggle};return d}}(jQuery,infrae);
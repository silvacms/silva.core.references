<div class="reference-widget" id="#"
     tal:attributes="id view/id">
  <script type="text/javascript">
    $(document).ready(function() {
      $('.reference-dialog').dialog({
        autoOpen: false,
        modal: true,
        buttons: {
          'Cancel': function() {
             $(this).dialog('close');
          }
        },
      });
      $('.reference-dialog-trigger').click(function() {
         var url = 'http://localhost:8080/silva/docs/++rest++items';
         var widget = $(this).parent('.reference-widget');
         var popup = $('#' + widget.attr('id') + '-dialog');
         popup.dialog('open');
         $.getJSON(url, function (data) {
           var target = popup.find('.reference-dialog-data');
           target.empty();
           $.each(data, function(index, entry) {
              var item = $('<li />');
              item.text(entry['title']);
              item.appendTo(target);
           });
           console.log(target);
           console.log(data);
         });
         return false;
      });
    });
  </script>
  <div id="#" title="#" class="ui-widget reference-dialog"
       tal:attributes="id string:${view/id}-dialog;
                       title view/title">
    <ul class="reference-dialog-data">
    </ul>
  </div>
  <button class="button reference-dialog-trigger">
      Change
  </button>
</div>
